# üöÄ INSTRUCTIONS DE D√âPLOIEMENT COMPL√àTES
**Chuck Wagon Allerg√®nes - Version 1.0.1**

## üìã PR√âREQUIS

### **Comptes n√©cessaires**
- [ ] Compte Supabase (gratuit) - [supabase.com](https://supabase.com)
- [ ] Compte Netlify (gratuit) - [netlify.com](https://netlify.com)
- [ ] Compte GitHub (optionnel) - [github.com](https://github.com)

### **Outils requis**
- [ ] Node.js 18+ - [nodejs.org](https://nodejs.org)
- [ ] NPM (inclus avec Node.js)
- [ ] Git (optionnel) - [git-scm.com](https://git-scm.com)
- [ ] √âditeur de code (VS Code recommand√©)

## üóÑÔ∏è √âTAPE 1 : CONFIGURATION SUPABASE

### **1.1 Cr√©er le projet Supabase**
1. Aller sur [supabase.com](https://supabase.com)
2. Cliquer "Start your project"
3. Se connecter avec GitHub/Google
4. Cliquer "New project"
5. Choisir :
   - **Name** : `chuck-wagon-allergenes`
   - **Database Password** : G√©n√©rer un mot de passe fort
   - **Region** : Choisir la plus proche (Europe West pour la France)
6. Cliquer "Create new project"
7. **Attendre 2-3 minutes** que le projet soit pr√™t

### **1.2 R√©cup√©rer les cl√©s API**
1. Dans le dashboard Supabase, aller dans **Settings** > **API**
2. Noter ces informations :
   ```
   Project URL: https://xxxxxxxxx.supabase.co
   anon public key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   ```

### **1.3 Configurer la base de donn√©es**
1. Aller dans **SQL Editor**
2. Cliquer "New query"
3. **Copier-coller TOUT le contenu** du fichier `backup/database-schema-complete.sql`
4. Cliquer "Run" (‚ñ∂Ô∏è)
5. V√©rifier qu'il n'y a pas d'erreurs
6. Aller dans **Table Editor** pour v√©rifier que les tables `dishes` et `dish_modifications` existent

### **1.4 Cr√©er un utilisateur admin**
1. Aller dans **Authentication** > **Users**
2. Cliquer "Add user"
3. Remplir :
   - **Email** : `tomy.marie94@gmail.com` (ou votre email)
   - **Password** : Choisir un mot de passe fort
   - **Email Confirm** : ‚úÖ Cocher (pour √©viter la confirmation)
4. Cliquer "Create user"

### **1.5 Configurer le Storage (optionnel)**
1. Aller dans **Storage**
2. Cliquer "Create bucket"
3. Nom : `dish-images`
4. **Public bucket** : ‚úÖ Cocher
5. Cliquer "Create bucket"

## ‚öôÔ∏è √âTAPE 2 : CONFIGURATION LOCALE

### **2.1 Pr√©parer le projet**
```bash
# Cr√©er le dossier du projet
mkdir chuck-wagon-allergenes
cd chuck-wagon-allergenes

# Initialiser le projet Vite + React + TypeScript
npm create vite@latest . -- --template react-ts

# Installer les d√©pendances de base
npm install

# Installer les d√©pendances sp√©cifiques du projet
npm install @supabase/supabase-js@^2.53.0 react-router-dom@^7.7.1 lucide-react@^0.344.0 uuid@^11.1.0
npm install @types/react-router-dom@^5.3.3 @types/uuid@^10.0.0 --save-dev

# Installer Tailwind CSS
npm install tailwindcss@^3.4.1 autoprefixer@^10.4.18 postcss@^8.4.35 --save-dev
npx tailwindcss init -p
```

### **2.2 Copier les fichiers du backup**
Copier tous les fichiers de cette sauvegarde dans votre projet :

```
src/
‚îú‚îÄ‚îÄ components/ (tous les fichiers .tsx)
‚îú‚îÄ‚îÄ data/
‚îú‚îÄ‚îÄ hooks/
‚îú‚îÄ‚îÄ lib/
‚îú‚îÄ‚îÄ types/
‚îú‚îÄ‚îÄ utils/
‚îú‚îÄ‚îÄ App.tsx
‚îú‚îÄ‚îÄ main.tsx
‚îî‚îÄ‚îÄ index.css

public/
‚îú‚îÄ‚îÄ chuck-wagon-official-logo.png
‚îî‚îÄ‚îÄ (autres fichiers)

Configuration :
‚îú‚îÄ‚îÄ package.json (fusionner les d√©pendances)
‚îú‚îÄ‚îÄ vite.config.ts
‚îú‚îÄ‚îÄ tailwind.config.js
‚îú‚îÄ‚îÄ tsconfig.json
‚îî‚îÄ‚îÄ tsconfig.app.json
```

### **2.3 Variables d'environnement**
Cr√©er un fichier `.env` √† la racine :
```env
VITE_SUPABASE_URL=https://votre-projet-id.supabase.co
VITE_SUPABASE_ANON_KEY=votre-cle-anon-publique
```

**‚ö†Ô∏è Remplacer par vos vraies valeurs Supabase !**

### **2.4 Test en local**
```bash
# D√©marrer le serveur de d√©veloppement
npm run dev

# Ouvrir http://localhost:5173
# V√©rifier que l'application fonctionne
```

### **2.5 V√©rifications**
- [ ] Page d'accueil s'affiche avec s√©lection des langues
- [ ] Navigation fonctionne (fran√ßais ‚Üí avertissement ‚Üí menu)
- [ ] Connexion admin fonctionne avec votre email/mot de passe
- [ ] Interface admin s'affiche sans erreurs

## üåê √âTAPE 3 : D√âPLOIEMENT NETLIFY

### **3.1 Pr√©parer le build**
```bash
# Tester le build de production
npm run build

# V√©rifier que le dossier 'dist' est cr√©√©
ls dist/

# Tester le build localement
npm run preview
```

### **3.2 M√©thode A : Drag & Drop (Simple)**
1. Aller sur [netlify.com](https://netlify.com)
2. Se connecter avec GitHub/Google
3. Glisser-d√©poser le dossier `dist` sur la zone "Deploy"
4. Attendre le d√©ploiement
5. Noter l'URL g√©n√©r√©e (ex: `https://amazing-name-123456.netlify.app`)

### **3.3 M√©thode B : Git (Recommand√©e)**
```bash
# Initialiser Git (si pas d√©j√† fait)
git init
git add .
git commit -m "Initial commit - Chuck Wagon Allerg√®nes"

# Pousser sur GitHub
git remote add origin https://github.com/votre-username/chuck-wagon-allergenes.git
git push -u origin main
```

1. Sur Netlify, cliquer "Add new site" > "Import an existing project"
2. Choisir "GitHub" et autoriser l'acc√®s
3. S√©lectionner votre repository `chuck-wagon-allergenes`
4. Configuration :
   - **Build command** : `npm run build`
   - **Publish directory** : `dist`
   - **Node version** : 18
5. Cliquer "Deploy site"

### **3.4 Variables d'environnement Netlify**
1. Dans votre site Netlify, aller dans **Site settings** > **Environment variables**
2. Ajouter :
   ```
   VITE_SUPABASE_URL = https://votre-projet-id.supabase.co
   VITE_SUPABASE_ANON_KEY = votre-cle-anon-publique
   ```
3. Cliquer "Save"
4. **Red√©ployer** le site : **Deploys** > **Trigger deploy** > **Deploy site**

### **3.5 Configuration des redirections**
Cr√©er le fichier `public/_redirects` :
```
/*    /index.html   200
```

Puis red√©ployer.

## ‚úÖ √âTAPE 4 : V√âRIFICATION POST-D√âPLOIEMENT

### **4.1 Tests fonctionnels**
- [ ] **Page d'accueil** : S√©lection des langues fonctionne
- [ ] **Navigation** : Fran√ßais ‚Üí Avertissement ‚Üí Menu
- [ ] **Recherche** : Recherche de plats fonctionne
- [ ] **Cat√©gories** : Navigation par cat√©gories
- [ ] **D√©tail plat** : Affichage ingr√©dients/allerg√®nes
- [ ] **Administration** : Connexion avec votre email
- [ ] **CRUD** : Ajout/modification/suppression de plats
- [ ] **Responsive** : Test sur mobile/tablet

### **4.2 Tests de performance**
- [ ] **Temps de chargement** < 3 secondes
- [ ] **Images** s'affichent correctement
- [ ] **Pas d'erreurs** dans la console (F12)
- [ ] **Lighthouse score** > 80

### **4.3 Tests multilingues**
- [ ] **7 langues** disponibles sur la page d'accueil
- [ ] **Traductions** correctes dans chaque langue
- [ ] **Allerg√®nes** traduits automatiquement
- [ ] **Navigation** coh√©rente dans toutes les langues

## üçΩÔ∏è √âTAPE 5 : AJOUT DU CONTENU

### **5.1 Menu de base (optionnel)**
1. Se connecter √† l'administration : `https://votre-site.netlify.app/administration`
2. Utiliser email/mot de passe cr√©√©s dans Supabase
3. Cliquer "R√©initialiser menu complet" pour ajouter 80+ plats de base

### **5.2 Nouveau menu A2**
1. Dans l'interface admin, cliquer "Ajouter menu A2"
2. Confirmer l'ajout des 37 nouveaux plats
3. V√©rifier que tous les plats sont ajout√©s correctement

### **5.3 Ajout manuel de plats**
1. Cliquer "Ajouter un plat"
2. Remplir le formulaire :
   - **Nom** : Nom du plat
   - **Cat√©gorie** : Choisir dans la liste
   - **Langue** : fr (fran√ßais)
   - **Ingr√©dients** : Utiliser l'auto-compl√©tion
   - **Allerg√®nes** : S√©lection multiple
   - **Image** : URL Pexels (optionnel)
3. Cliquer "Ajouter le plat"

## üîß √âTAPE 6 : MAINTENANCE

### **6.1 Mise √† jour du contenu**
- **Ajout de plats** : Interface admin
- **Modification** : Cliquer sur l'ic√¥ne "Edit"
- **Suppression** : Cliquer sur l'ic√¥ne "Delete"
- **Historique** : Bouton "Historique" pour voir les modifications

### **6.2 Mise √† jour du code**
```bash
# Modifier le code localement
# Tester avec npm run dev
# Pousser sur GitHub
git add .
git commit -m "Description des modifications"
git push

# Netlify red√©ploie automatiquement
```

### **6.3 Sauvegarde des donn√©es**
1. **Supabase Dashboard** > **Settings** > **Database**
2. Cliquer "Backup" pour cr√©er une sauvegarde
3. T√©l√©charger le fichier SQL
4. Stocker en lieu s√ªr

## üÜò D√âPANNAGE

### **Probl√®mes courants**

#### **"Supabase non configur√©"**
- ‚úÖ V√©rifier les variables d'environnement
- ‚úÖ URL doit finir par `.supabase.co`
- ‚úÖ Cl√© API doit faire 100+ caract√®res
- ‚úÖ Red√©ployer apr√®s modification des variables

#### **"Erreur d'authentification"**
- ‚úÖ V√©rifier que l'utilisateur existe dans Supabase Auth
- ‚úÖ Tester email/mot de passe
- ‚úÖ V√©rifier que l'email est confirm√©

#### **"Plats non visibles"**
- ‚úÖ V√©rifier que les plats ont la bonne langue (`fr`)
- ‚úÖ Contr√¥ler les politiques RLS dans Supabase
- ‚úÖ V√©rifier les contraintes de cat√©gorie

#### **"Images ne s'affichent pas"**
- ‚úÖ Utiliser des URLs Pexels valides
- ‚úÖ Tester les URLs dans un navigateur
- ‚úÖ V√©rifier la configuration CORS

#### **"Build √©choue"**
- ‚úÖ V√©rifier les erreurs TypeScript
- ‚úÖ Installer toutes les d√©pendances
- ‚úÖ V√©rifier la version de Node.js (18+)

### **Logs et debugging**
- **Frontend** : Console navigateur (F12 > Console)
- **Backend** : Supabase Dashboard > Logs
- **Build** : Netlify Dashboard > Deploys > Deploy log
- **Network** : F12 > Network pour les requ√™tes API

## üìû SUPPORT

### **Documentation officielle**
- [Supabase Docs](https://supabase.com/docs)
- [Netlify Docs](https://docs.netlify.com)
- [React Router Docs](https://reactrouter.com)
- [Tailwind CSS Docs](https://tailwindcss.com/docs)

### **Communaut√©s**
- Supabase Discord
- Netlify Community
- Stack Overflow
- GitHub Issues

---

## üéØ CHECKLIST FINALE

### **Avant de consid√©rer le d√©ploiement termin√© :**

#### **Configuration**
- [ ] Projet Supabase cr√©√© et configur√©
- [ ] Base de donn√©es avec tables `dishes` et `dish_modifications`
- [ ] RLS activ√© et politiques configur√©es
- [ ] Utilisateur admin cr√©√©
- [ ] Variables d'environnement configur√©es

#### **Code**
- [ ] Tous les fichiers copi√©s depuis le backup
- [ ] D√©pendances install√©es (`npm install`)
- [ ] Build r√©ussi (`npm run build`)
- [ ] Tests locaux OK (`npm run dev`)

#### **D√©ploiement**
- [ ] Site d√©ploy√© sur Netlify
- [ ] Variables d'environnement configur√©es sur Netlify
- [ ] Redirections configur√©es (`_redirects`)
- [ ] URL personnalis√©e (optionnel)

#### **Tests**
- [ ] Navigation compl√®te test√©e
- [ ] Administration fonctionnelle
- [ ] Ajout/modification/suppression de plats
- [ ] Multilingue (7 langues)
- [ ] Responsive (mobile/desktop)
- [ ] Performance acceptable

#### **Contenu**
- [ ] Menu de base ajout√© (optionnel)
- [ ] Menu A2 ajout√© (37 plats)
- [ ] Images fonctionnelles
- [ ] Traductions correctes

---

**üéâ F√âLICITATIONS !**

Votre application Chuck Wagon Allerg√®nes est maintenant **100% op√©rationnelle** !

**üîó URLs importantes :**
- **Site public** : `https://votre-site.netlify.app`
- **Administration** : `https://votre-site.netlify.app/administration`
- **Supabase Dashboard** : `https://app.supabase.com/project/votre-projet-id`

**ü§† Chuck Wagon Caf√© - Pr√™t √† servir !** üçΩÔ∏è‚ú®